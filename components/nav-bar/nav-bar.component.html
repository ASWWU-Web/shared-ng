<nav class="navbar navbar-dark bg-dark navbar-expand-md">

  <button class="navbar navbar-toggler" 
          type="button" 
          data-target="#mobile-nav-collapsible" 
          aria-controls="mobile-nav-collapsible" 
          (click)="isCollapsed = !isCollapsed"
          [attr.aria-expanded]="!isCollapsed"
  >
    <span class="navbar-toggler-icon"></span>
  </button>

  <!-- Desktop Navbar -->
  <div class="collapse navbar-collapse" >
    
    <ul id="nav-links" class="navbar-nav text-xs-center mr-auto d-none d-md-block">
      <li *ngFor="let item of links" [ngClass]="{'nav-item': item.link != null, 'dropdown': item.link == null}">
        <!-- For Direct Links -->
        <a *ngIf="item.link != null" class="smooth text-uppercase" href="{{item.link}}"> {{item.text}} </a>
        <!-- For Links with Dropdowns -->
        <div *ngIf="item.link == null" ngbDropdown class="d-inline-block">
            <button ngbDropdownToggle class="btn btn-outline-primary text-uppercase" id="{{'dropdown' + item.text}}" >{{item.text}}</button>
            <div ngbDropdownMenu class="dropdown-menu bg-dark" [attr.aria-valuenow]="'dropdown' + item.text">
              <a *ngFor="let dropdownItem of item.dropdownLinks" href="{{dropdownItem.link}}" class="dropdown-item text-uppercase">{{dropdownItem.text}}</a>
            </div>
        </div>
      </li>
    </ul>

  </div>
  <user-bubble></user-bubble>
</nav>
<div id="nav-spacer"></div>

<!-- Mobile Navigation Menu -->
<div class="desktop-hide mobile-scrollable-menu bg-dark" id="mobile-nav-collapsible" [ngbCollapse]="isCollapsed">
    <ngb-accordion (panelChange)="beforeChange($event)" #acc="ngbAccordion" class="mobile-accordion">
      <ngb-panel *ngFor="let item of links" id="{{ ((item.link!=null) ? 'linkOnly' : '') + item.text}}" title="{{item.text}}" class="mobile-accordion">
        <ng-template *ngIf="item.link == null" ngbPanelContent class="mobile-accordion">
          <a *ngFor="let dropdownItem of item.dropdownLinks" href="{{dropdownItem.link}}" class="mobile-accordion">{{dropdownItem.text}}</a>
        </ng-template>
      </ngb-panel>
    </ngb-accordion>
</div>